<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Sphoorthy Engineering College Library</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --admin-color: #9b59b6;
            --user-color: #1abc9c;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 0;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles */
        .dashboard-header {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .college-logo {
            width: 300px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .college-logo:hover {
            transform: scale(1.02);
        }
        
        .college-logo img {
            max-width: 100%;
            max-height: 100%;
        }
        
        .header-text h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .welcome-message {
            opacity: 0.9;
            font-size: 0.9rem;
        }
        
        .location-info, .role-info {
            font-size: 0.8rem;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .role-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 10px;
            transition: var(--transition);
        }

        .role-badge:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .header-right {
            display: flex;
            gap: 10px;
        }
        
        /* Main Dashboard Content */
        .dashboard-main {
            padding: 30px 0;
            flex: 1;
        }
        
        /* Stats Section */
        /* Flexbox approach for stats section */
.stats-section {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin-bottom: 30px;
    width: 100%;
}

.stat-card {
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: var(--shadow);
    text-align: center;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    animation: fadeInUp 0.8s ease-out;
    flex: 1;
    min-height: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* Media queries for flexbox approach */
@media (max-width: 768px) {
    .stats-section {
        gap: 15px;
    }
    
    .stat-card {
        padding: 18px;
        min-height: 160px;
    }
}

@media (max-width: 576px) {
    .stats-section {
        gap: 10px;
    }
    
    .stat-card {
        padding: 15px;
        min-height: 140px;
    }
}

@media (max-width: 480px) {
    .stats-section {
        gap: 8px;
    }
    
    .stat-card {
        padding: 12px;
        min-height: 130px;
    }
}

@media (max-width: 360px) {
    .stats-section {
        gap: 6px;
    }
    
    .stat-card {
        padding: 10px;
        min-height: 120px;
    }
}

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .stat-card.pdfs {
            border-left: 5px solid var(--danger-color);
        }
        
        .stat-card.categories {
            border-left: 5px solid var(--success-color);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
            transition: var(--transition);
        }

        .stat-card:hover .stat-icon {
            color: var(--accent-color);
            transform: scale(1.1);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--dark-color);
            margin-bottom: 5px;
            transition: var(--transition);
        }

        .stat-card:hover .stat-number {
            color: var(--accent-color);
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        /* Admin Features */
        .admin-features {
            background: linear-gradient(135deg, #f3e8ff, #ede9fe);
            border: 2px solid var(--admin-color);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            animation: fadeInUp 0.8s ease-out;
            transition: var(--transition);
        }

        .admin-features:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.2);
        }
        
        .admin-features h3 {
            color: var(--admin-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* Documents Section */
        .documents-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            animation: fadeInUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .documents-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }

        .documents-section:hover::before {
            transform: scaleX(1);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .section-title {
            font-size: 1.5rem;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Search and Filter */
        .search-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }
        
        .filter-select {
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            min-width: 150px;
            transition: var(--transition);
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        /* PDF Grid */
        
        /* PDF Grid - Always 3 columns */


.pdf-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.5s ease;
}

.pdf-card:hover::before {
    transform: scaleX(1);
}

.pdf-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: var(--accent-color);
}



.pdf-icon {
    flex-shrink: 0;
    color: var(--danger-color);
    font-size: 2rem;
    transition: var(--transition);
}

.pdf-card:hover .pdf-icon {
    transform: scale(1.1);
    color: var(--accent-color);
}

 


.pdf-card:hover .pdf-category {
    background: var(--secondary-color);
    color: white;
}



.pdf-meta span {
    display: flex;
    align-items: center;
    gap: 5px;
}



.pdf-tag {
    background: #e5e7eb;
    color: #374151;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.7rem;
    transition: var(--transition);
}

.pdf-card:hover .pdf-tag {
    background: var(--light-color);
}


/* Flexbox approach for PDF Grid */
.pdf-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.pdf-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    padding: 20px;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow);
    animation: fadeInUp 0.8s ease-out;
    display: flex;
    flex-direction: column;
    flex: 1 1 calc(33.333% - 20px);
    min-width: 300px;
    height: 100%;
}

/* Responsive adjustments for flexbox */
@media (max-width: 992px) {
    .pdf-card {
        flex: 1 1 calc(50% - 15px);
        min-width: 250px;
    }
}

@media (max-width: 768px) {
    .pdf-grid {
        gap: 15px;
    }
    
    .pdf-card {
        flex: 1 1 calc(50% - 15px);
        min-width: 200px;
        padding: 15px;
    }
}

@media (max-width: 576px) {
    .pdf-grid {
        gap: 12px;
    }
    
    .pdf-card {
        flex: 1 1 calc(50% - 12px);
        min-width: 150px;
        padding: 12px;
    }
}

@media (max-width: 480px) {
    .pdf-grid {
        gap: 10px;
    }
    
    .pdf-card {
        flex: 1 1 calc(50% - 10px);
        min-width: 140px;
        padding: 10px;
    }
}

@media (max-width: 360px) {
    .pdf-card {
        flex: 1 1 100%;
        min-width: auto;
    }
}

/* Responsive adjustments for 3-column layout */
@media (max-width: 1200px) {
    .pdf-grid {
        gap: 18px;
    }
    
    .pdf-card {
        padding: 18px;
        min-height: 260px;
    }
    
    .pdf-title {
        font-size: 1.05rem;
    }
}

@media (max-width: 992px) {
    .pdf-grid {
        gap: 15px;
    }
    
    .pdf-card {
        padding: 16px;
        min-height: 240px;
    }
    
    .pdf-title {
        font-size: 1rem;
        min-height: 2.6em;
    }
    
    .pdf-icon {
        font-size: 1.8rem;
    }
    
    .pdf-meta {
        font-size: 0.75rem;
    }
}

@media (max-width: 768px) {
    .pdf-grid {
        gap: 12px;
    }
    
    .pdf-card {
        padding: 14px;
        min-height: 220px;
    }
    
    .pdf-header {
        gap: 12px;
        margin-bottom: 12px;
    }
    
    .pdf-title {
        font-size: 0.95rem;
        min-height: 2.4em;
    }
    
    .pdf-icon {
        font-size: 1.6rem;
    }
    
    .pdf-category {
        font-size: 0.75rem;
        padding: 3px 10px;
    }
    
    .pdf-meta {
        font-size: 0.7rem;
    }
    
    .pdf-tag {
        font-size: 0.65rem;
        padding: 2px 6px;
    }
    
    .btn {
        padding: 7px 12px;
        font-size: 0.85rem;
    }
}

@media (max-width: 576px) {
    .pdf-grid {
        gap: 10px;
    }
    
    .pdf-card {
        padding: 12px;
        min-height: 200px;
    }
    
    .pdf-header {
        gap: 10px;
        margin-bottom: 10px;
    }
    
    .pdf-title {
        font-size: 0.9rem;
        min-height: 2.2em;
    }
    
    .pdf-icon {
        font-size: 1.4rem;
    }
    
    .pdf-category {
        font-size: 0.7rem;
        padding: 2px 8px;
    }
    
    .pdf-meta {
        font-size: 0.65rem;
        gap: 3px;
    }
    
    .pdf-tags {
        margin-bottom: 10px;
    }
    
    .pdf-tag {
        font-size: 0.6rem;
        padding: 1px 5px;
    }
    
    .btn {
        padding: 6px 10px;
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .pdf-grid {
        gap: 8px;
    }
    
    .pdf-card {
        padding: 10px;
        min-height: 180px;
    }
    
    .pdf-header {
        gap: 8px;
        margin-bottom: 8px;
    }
    
    .pdf-title {
        font-size: 0.85rem;
        min-height: 2em;
    }
    
    .pdf-icon {
        font-size: 1.2rem;
    }
    
    .pdf-category {
        font-size: 0.65rem;
        padding: 2px 6px;
    }
    
    .pdf-meta {
        font-size: 0.6rem;
    }
    
    .pdf-tag {
        font-size: 0.55rem;
    }
    
    .btn {
        padding: 5px 8px;
        font-size: 0.75rem;
    }
}

@media (max-width: 360px) {
    .pdf-grid {
        gap: 6px;
    }
    
    .pdf-card {
        padding: 8px;
        min-height: 160px;
    }
    
    .pdf-header {
        gap: 6px;
        margin-bottom: 6px;
    }
    
    .pdf-title {
        font-size: 0.8rem;
        min-height: 1.8em;
    }
    
    .pdf-icon {
        font-size: 1rem;
    }
    
    .pdf-category {
        font-size: 0.6rem;
        padding: 1px 5px;
    }
    
    .pdf-meta {
        font-size: 0.55rem;
    }
    
    .pdf-tag {
        font-size: 0.5rem;
    }
    
    .btn {
        padding: 4px 6px;
        font-size: 0.7rem;
    }
}

/* No Results Styling */
.no-results {
    text-align: center;
    padding: 60px 20px;
    color: #6b7280;
    grid-column: 1 / -1;
    background: white;
    border-radius: 10px;
    border: 2px dashed #e5e7eb;
}

.no-results i {
    font-size: 4rem;
    margin-bottom: 20px;
    opacity: 0.5;
}

.no-results h3 {
    margin-bottom: 10px;
    color: var(--dark-color);
}

.no-results p {
    margin-bottom: 20px;
}

/* Ensure PDF cards maintain equal height */
.pdf-grid {
    align-items: stretch;
}

.pdf-card {
    height: auto;
}
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid #d1d5db;
            color: #374151;
        }
        
        .btn-outline:hover {
            border-color: var(--accent-color);
            background: #f9fafb;
            transform: translateY(-2px);
        }
        
        /* No Results */
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
            grid-column: 1 / -1;
        }
        
        .no-results i {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        /* Flash Messages */
        .flash-messages {
            margin: 20px 0;
        }
        
        .flash-message {
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideDown 0.5s ease;
        }
        
        .flash-message.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        
        .flash-message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        
        /* Enhanced PDF Viewer Modal */
        .pdf-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }

        .pdf-modal.active {
            display: flex;
            flex-direction: column;
        }

        .pdf-modal-header {
            background: var(--dark-color);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
            flex-shrink: 0;
            position: relative;
            z-index: 10001;
        }

        .pdf-modal-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 70%;
        }

        .pdf-modal-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .pdf-modal-body {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
            position: relative;
        }

        .pdf-viewer-container {
            width: 95%;
            height: 95%;
            max-width: 1200px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .pdf-viewer-toolbar {
            background: #1f2937;
            padding: 12px 20px;
            border-bottom: 1px solid #374151;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            flex-shrink: 0;
        }

        .pdf-viewer-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            color: white;
        }

        .pdf-viewer-nav {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .pdf-viewer-frame {
            flex: 1;
            border: none;
            width: 100%;
            height: 100%;
            background: white;
        }

        .pdf-viewer-info {
            font-size: 0.9rem;
            color: #d1d5db;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn-close {
            background: var(--danger-color);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            min-height: 44px;
        }

        .btn-close:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .btn-toolbar {
            background: #374151;
            border: 1px solid #4b5563;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .btn-toolbar:hover {
            background: #4b5563;
            border-color: #6b7280;
            transform: scale(1.05);
        }

        .btn-toolbar:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .zoom-level {
            min-width: 60px;
            text-align: center;
            font-weight: 600;
            color: white;
        }

        /* Developer Section */
        .developer-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.8s ease-out;
        }
        
        .developer-info {
            margin-bottom: 20px;
        }
        
        .developer-info p {
            margin-bottom: 10px;
        }
        
        .developer-logo {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: var(--transition);
        }
        
        .developer-logo:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .developer-logo img {
            max-width: 100%;
            max-height: 100%;
        }
        
        .developer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .dev-social-link {
            color: white;
            font-size: 1.5rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .dev-social-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px) scale(1.1);
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 20px;
            opacity: 0.8;
            font-size: 0.9rem;
            width: 100%;
        }

        /* Animation Keyframes */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading indicator */
        .pdf-loading {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--accent-color);
            font-size: 2rem;
            z-index: 1000;
        }

        .pdf-modal.active .pdf-loading {
            display: block;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .pdf-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 992px) {
            .stats-section {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .header-left {
                flex-direction: column;
                text-align: center;
            }
            
            .search-filter {
                flex-direction: column;
            }
            
            .search-box {
                min-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .dashboard-header {
                padding: 15px 0;
            }
            
            .college-logo {
                width: 250px;
                height: 80px;
            }
            
            .header-text h1 {
                font-size: 1.5rem;
            }
            
            .stats-section {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .stat-card {
                padding: 20px;
            }
            
            .stat-number {
                font-size: 2rem;
            }
            
            .pdf-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .pdf-card {
                padding: 15px;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .admin-actions {
                flex-direction: column;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }

            /* PDF Viewer Mobile Improvements */
            .pdf-modal-header {
                padding: 12px 15px;
            }
            
            .pdf-modal-title {
                font-size: 1rem;
                max-width: 60%;
            }
            
            .pdf-modal-body {
                padding: 10px;
            }
            
            .pdf-viewer-container {
                width: 100%;
                height: 100%;
                border-radius: 0;
                max-width: 100%;
            }
            
            .pdf-viewer-toolbar {
                padding: 10px 15px;
                flex-direction: column;
                gap: 10px;
            }
            
            .pdf-viewer-controls {
                width: 100%;
                justify-content: space-between;
                gap: 8px;
            }
            
            .pdf-viewer-nav {
                order: 1;
                width: 100%;
                justify-content: center;
            }
            
            .zoom-controls {
                order: 2;
                width: 100%;
                justify-content: center;
            }
            
            .btn-toolbar {
                padding: 6px 10px;
                font-size: 0.8rem;
                min-width: 40px;
            }
            
            .pdf-viewer-info {
                font-size: 0.8rem;
                gap: 10px;
            }
            
            .zoom-level {
                min-width: 50px;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 10px;
            }
            
            .dashboard-main {
                padding: 20px 0;
            }
            
            .college-logo {
                width: 200px;
                height: 70px;
            }
            
            .header-text h1 {
                font-size: 1.3rem;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-number {
                font-size: 1.8rem;
            }
            
            .stat-icon {
                font-size: 2rem;
            }
            
            .documents-section {
                padding: 20px;
            }
            
            .pdf-card {
                padding: 12px;
            }
            
            .pdf-title {
                font-size: 1rem;
            }
            
            .pdf-icon {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .developer-logo {
                width: 100px;
                height: 100px;
            }

            /* PDF Viewer Mobile Small */
            .pdf-modal-title {
                font-size: 0.9rem;
                max-width: 50%;
            }
            
            .pdf-viewer-toolbar {
                padding: 8px 10px;
            }
            
            .btn-toolbar {
                padding: 5px 8px;
                font-size: 0.75rem;
                min-width: 36px;
            }
            
            .pdf-viewer-info {
                font-size: 0.75rem;
            }
            
            .btn-close {
                padding: 6px 10px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .stats-section {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-number {
                font-size: 1.5rem;
            }
            
            .stat-label {
                font-size: 0.8rem;
            }
            
            .pdf-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pdf-card {
                padding: 10px;
            }
            
            .pdf-title {
                font-size: 0.9rem;
            }
            
            .pdf-icon {
                font-size: 1.3rem;
            }
            
            .pdf-category {
                font-size: 0.7rem;
                padding: 3px 8px;
            }
            
            .pdf-meta {
                font-size: 0.7rem;
            }
            
            .pdf-tag {
                font-size: 0.6rem;
                padding: 1px 5px;
            }
        }

        @media (max-width: 360px) {
            .college-logo {
                width: 180px;
                height: 60px;
            }
            
            .header-text h1 {
                font-size: 1.2rem;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-number {
                font-size: 1.3rem;
            }
            
            .stat-icon {
                font-size: 1.8rem;
            }
            
            .pdf-card {
                padding: 8px;
            }
            
            .pdf-title {
                font-size: 0.85rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
        }

        /* Print Styles */
        @media print {
            .dashboard-header,
            .admin-features,
            .developer-section,
            footer,
            .btn {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .documents-section {
                box-shadow: none !important;
                border: 1px solid #ccc !important;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <div class="college-logo">
                        <img src="/static/images/college_logo.png" alt="Sphoorthy Engineering College Logo">
                    </div>
                    <div class="header-text">
                        <h1>
                            <i class="fas fa-book"></i>
                            Library Management System
                        </h1>
                        <p class="welcome-message">
                            Welcome back,   <span class="field-value">{{ user_profile.name if user_profile else 'Not Available' }}</span> ID no <strong>{{ username }}</strong>!
                            <span class="role-badge">{{ user_role|title }}</span>
                        </p>
                        <p class="location-info">
                            <i class="fas fa-map-marker-alt"></i> {{ location }}
                        </p>
                        <p class="role-info">
                            <i class="fas fa-user-shield"></i> 
                            {% if user_role == 'admin' %}
                            Administrator Access - Full System Control
                            {% else %}
                            User Access - Document Viewing Only
                            {% endif %}
                        </p>
                    </div>
                </div>
                <div class="header-right">
                    {% if user_role == 'admin' %}
                    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline" style="color: white; border-color: white;">
                        <i class="fas fa-cog"></i> Admin Panel
                    </a>
                    {% endif %}
                    <a href="{{ url_for('logout') }}" class="btn btn-outline" style="color: white; border-color: white;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container">
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash-message {{ category }}">
                            <i class="fas fa-{% if category == 'success' %}check-circle{% else %}exclamation-circle{% endif %}"></i>
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <div class="dashboard-main">
        <div class="container">
            <!-- Statistics Section -->
           <!-- Statistics Section -->
<div class="stats-section">
    <div class="stat-card pdfs">
        <div class="stat-icon">
            <i class="fas fa-file-pdf"></i>
        </div>
        <div class="stat-number">{{ pdfs|length }}</div>
        <div class="stat-label">Total Documents</div>
    </div>
    <div class="stat-card categories">
        <div class="stat-icon">
            <i class="fas fa-folder"></i>
        </div>
        <div class="stat-number">{{ categories|length }}</div>
        <div class="stat-label">Categories</div>
    </div>
    <div class="stat-card users">
        <div class="stat-icon">
            <i class="fas fa-users"></i>
        </div>
        <div class="stat-number">{{ user_stats.total_users }}</div>
        <div class="stat-label">Total Users</div>
    </div>
</div>

            <!-- Admin Features -->
            {% if user_role == 'admin' %}
            <div class="admin-features">
                <h3><i class="fas fa-crown"></i> Administrator Controls</h3>
                <div class="admin-actions">
                    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-primary">
                        <i class="fas fa-cog"></i> Manage PDFs & Users
                    </a>
                    <a href="{{ url_for('admin_users') }}" class="btn btn-outline">
                        <i class="fas fa-user-plus"></i> User Management
                    </a>
                </div>
            </div>
            {% endif %}

            <!-- Documents Section -->
            <div class="documents-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-files"></i>
                        PDF Documents ({{ pdfs|length }})
                    </h2>
                </div>
                
                <!-- Search and Filter -->
                <div class="search-filter">
                    <div class="search-box">
                        <input type="text" id="searchInput" class="search-input" placeholder="Search documents..." value="{{ search_query }}" oninput="performSearch()">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <select class="filter-select" id="categoryFilter" onchange="performSearch()">
                        <option value="">All Categories</option>
                        {% for category in categories %}
                        <option value="{{ category }}" {% if category_filter == category %}selected{% endif %}>
                            {{ category }}
                        </option>
                        {% endfor %}
                    </select>
                    {% if search_query or category_filter %}
                    <a href="{{ url_for('dashboard') }}" class="btn btn-outline">
                        <i class="fas fa-times"></i> Clear
                    </a>
                    {% endif %}
                </div>
                
                <!-- PDF Grid -->
                <div class="pdf-grid">
                    {% for pdf in pdfs %}
                    <div class="pdf-card">
                        <div class="pdf-header">
                            <div class="pdf-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <div class="pdf-info">
                                <h3 class="pdf-title">{{ pdf.title }}</h3>
                                <span class="pdf-category">{{ pdf.category }}</span>
                                <div class="pdf-meta">
                                    <span><i class="fas fa-weight-hanging"></i> {{ pdf.file_size }}</span>
                                    <span><i class="fas fa-calendar"></i> {{ pdf.upload_date }}</span>
                                </div>
                                {% if pdf.tags %}
                                <div class="pdf-tags">
                                    {% for tag in pdf.tags %}
                                    <span class="pdf-tag">{{ tag }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="pdf-actions">
                            <button class="btn btn-primary" onclick="openPdfViewer('{{ pdf.drive_link }}', '{{ pdf.title }}')">
                                <i class="fas fa-eye"></i> View PDF
                            </button>
                        </div>
                    </div>
                    {% else %}
                    <div class="no-results">
                        <i class="fas fa-search"></i>
                        <h3>No documents found</h3>
                        <p>Try adjusting your search terms or filters</p>
                        {% if user_role == 'admin' %}
                        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-primary" style="margin-top: 15px;">
                            <i class="fas fa-plus"></i> Add PDFs in Admin Panel
                        </a>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Developer Section -->
            <div class="developer-section">
                <div class="developer-info">
                    <p style="font-size: 1.1rem;">Library Management System developed by <strong>Laxmi Nivas Morishetty</strong></p>
                    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.9);">Cyber Security Student | SmartNLight Innovation Founder</p>
                </div>
                
                <!-- SmartNLight Innovation Logo -->
                <a href="https://smartnlightinnovation.netlify.app" target="_blank" class="developer-logo">
                    <img src="/static/images/4.png" alt="SmartNLight Innovation Logo">
                </a>
                
                <!-- Developer Contact Links -->
                <div class="developer-links">
                    <a href="https://www.linkedin.com/in/laxmi-nivas-morishetty-02468m/" target="_blank" class="dev-social-link">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://laxminivasmorishetty.netlify.app" target="_blank" class="dev-social-link">
                        <i class="fas fa-globe"></i>
                    </a>
                    <a href="https://instagram.com/laxminivasmorishetty" target="_blank" class="dev-social-link">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- PDF Viewer Modal -->
    <div class="pdf-modal" id="pdfModal">
        <div class="pdf-modal-header">
            <div class="pdf-modal-title">
                <i class="fas fa-file-pdf"></i>
                <span id="pdfModalTitle">PDF Document</span>
            </div>
            <div class="pdf-modal-actions">
                <button class="btn-close" id="closePdfModal" title="Close PDF Viewer">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
        <div class="pdf-modal-body">
            <div class="pdf-loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p style="font-size: 1rem; margin-top: 10px; color: white;">Loading PDF...</p>
            </div>
            <div class="pdf-viewer-container">
                <div class="pdf-viewer-toolbar">
                    <div class="pdf-viewer-controls">
                        <div class="pdf-viewer-nav">
                            <button class="btn-toolbar" id="prevPage" title="Previous Page">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="pageInfo" class="pdf-viewer-info">Page 1 of 1</span>
                            <button class="btn-toolbar" id="nextPage" title="Next Page">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="zoom-controls">
                            <button class="btn-toolbar" id="zoomOut" title="Zoom Out">
                                <i class="fas fa-search-minus"></i>
                            </button>
                            <span class="zoom-level" id="zoomLevel">100%</span>
                            <button class="btn-toolbar" id="zoomIn" title="Zoom In">
                                <i class="fas fa-search-plus"></i>
                            </button>
                            <button class="btn-toolbar" id="fitWidth" title="Fit to Width">
                                <i class="fas fa-arrows-alt-h"></i>
                            </button>
                            <button class="btn-toolbar" id="fitPage" title="Fit to Page">
                                <i class="fas fa-arrows-alt-v"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <iframe class="pdf-viewer-frame" id="pdfViewer" 
                        sandbox="allow-scripts allow-same-origin"
                        allow="fullscreen"
                        title="PDF Document Viewer"
                        style="background: white;">
                </iframe>
            </div>
        </div> 
    </div>

    <footer>
        <p>Â© <span id="year"></span> Sphoorthy Engineering College - Library Management System. All rights reserved.</p>
    </footer>

    <script>
        // Set current year in footer
        document.getElementById('year').textContent = new Date().getFullYear();

        // Enhanced PDF Viewer with embedded viewing and download protection
        let currentPdfUrl = '';
        let currentZoom = 100;
        let isMobile = window.innerWidth <= 768;

        // Search functionality with debouncing
        let searchTimeout;

        function performSearch() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const searchTerm = document.getElementById('searchInput').value;
                const category = document.getElementById('categoryFilter').value;
                
                const params = new URLSearchParams();
                if (searchTerm) params.append('search', searchTerm);
                if (category) params.append('category', category);
                
                window.location.href = '{{ url_for("dashboard") }}?' + params.toString();
            }, 300);
        }

        // Enter key support for search
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                clearTimeout(searchTimeout);
                performSearch();
            }
        });

        // Clear search when input is emptied
        document.getElementById('searchInput').addEventListener('input', function(e) {
            if (e.target.value === '') {
                clearTimeout(searchTimeout);
                performSearch();
            }
        });

        // Mobile detection
        function checkMobileStatus() {
            isMobile = window.innerWidth <= 768;
        }

        window.addEventListener('resize', checkMobileStatus);
        window.addEventListener('orientationchange', function() {
            setTimeout(checkMobileStatus, 100);
        });

        // Enhanced PDF Viewer function
        function openPdfViewer(pdfUrl, title) {
            currentPdfUrl = pdfUrl;
            document.getElementById('pdfModalTitle').textContent = title;
            const modal = document.getElementById('pdfModal');
            modal.classList.add('active');
            
            // Disable body scroll
            document.body.style.overflow = 'hidden';
            
            // Show loading indicator
            document.querySelector('.pdf-loading').style.display = 'block';
            
            // Convert to embedded URL and load
            const embeddedUrl = convertToEmbeddedUrl(pdfUrl);
            const iframe = document.getElementById('pdfViewer');
            
            // Set iframe source
            iframe.src = embeddedUrl;
            
            // Set initial zoom for mobile/desktop
            currentZoom = isMobile ? 80 : 100;
            updateZoomDisplay();
            
            // Hide loading indicator when PDF loads
            iframe.onload = function() {
                document.querySelector('.pdf-loading').style.display = 'none';
                
                // Enhanced download protection
                try {
                    // Disable right-click context menu
                    iframe.contentDocument.addEventListener('contextmenu', function(e) {
                        e.preventDefault();
                        return false;
                    });
                    
                    // Disable text selection
                    iframe.contentDocument.addEventListener('selectstart', function(e) {
                        e.preventDefault();
                        return false;
                    });
                    
                    // Remove download buttons from Google Drive viewer
                    const style = document.createElement('style');
                    style.textContent = `
                        .ndfHFb-c4YZDc-Wrql6b, 
                        .ndfHFb-c4YZDc-ToZjC, 
                        .ndfHFb-c4YZDc-bN97Pc-tJHJj,
                        .ndfHFb-c4YZDc-GSQQnc,
                        [aria-label*="Download"],
                        [jsname*="download"] {
                            display: none !important;
                        }
                    `;
                    iframe.contentDocument.head.appendChild(style);
                    
                } catch (e) {
                    console.log('Enhanced protection applied');
                }
            };
            
            resetPageInfo();
            addToBrowserHistory();
        }

        // Convert Google Drive URL to embedded viewer
        function convertToEmbeddedUrl(driveUrl) {
            if (driveUrl.includes('/file/d/')) {
                const fileId = driveUrl.match(/\/file\/d\/([^\/]+)/)[1];
                return `https://drive.google.com/file/d/${fileId}/preview?embedded=true&toolbar=0&navpanes=0`;
            }
            return driveUrl;
        }

        // Update zoom display
        function updateZoomDisplay() {
            document.getElementById('zoomLevel').textContent = currentZoom + '%';
            try {
                const iframe = document.getElementById('pdfViewer');
                if (iframe.contentDocument && iframe.contentDocument.body) {
                    iframe.contentDocument.body.style.zoom = currentZoom + '%';
                }
            } catch (e) {
                // Cross-origin restrictions
            }
        }

        // Reset page info
        function resetPageInfo() {
            document.getElementById('pageInfo').textContent = 'Page 1 of 1';
            document.getElementById('prevPage').disabled = true;
            document.getElementById('nextPage').disabled = true;
        }

        // Add to browser history for back button support
        function addToBrowserHistory() {
            window.history.pushState({ pdfViewer: true }, '', window.location.href);
        }

        // Close modal function
        function closePdfViewer() {
            const modal = document.getElementById('pdfModal');
            modal.classList.remove('active');
            document.getElementById('pdfViewer').src = '';
            document.body.style.overflow = '';
            document.querySelector('.pdf-loading').style.display = 'none';
        }

        // Event listeners
        document.getElementById('closePdfModal').addEventListener('click', closePdfViewer);

        // Zoom controls
        document.getElementById('zoomIn').addEventListener('click', function() {
            if (currentZoom < 200) {
                currentZoom += isMobile ? 5 : 10;
                updateZoomDisplay();
            }
        });

        document.getElementById('zoomOut').addEventListener('click', function() {
            if (currentZoom > 50) {
                currentZoom -= isMobile ? 5 : 10;
                updateZoomDisplay();
            }
        });

        document.getElementById('fitWidth').addEventListener('click', function() {
            currentZoom = isMobile ? 80 : 100;
            updateZoomDisplay();
        });

        document.getElementById('fitPage').addEventListener('click', function() {
            currentZoom = isMobile ? 70 : 80;
            updateZoomDisplay();
        });

        // Page navigation (placeholder)
        document.getElementById('prevPage').addEventListener('click', function() {
            // Would require PDF.js integration for multi-page navigation
            alert('Multi-page navigation requires advanced PDF.js integration');
        });

        document.getElementById('nextPage').addEventListener('click', function() {
            // Would require PDF.js integration for multi-page navigation
            alert('Multi-page navigation requires advanced PDF.js integration');
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closePdfViewer();
            }
        });

        // Handle browser back button
        window.addEventListener('popstate', function(event) {
            if (event.state && event.state.pdfViewer) {
                closePdfViewer();
            }
        });

        // Number counting animation
        document.addEventListener('DOMContentLoaded', function() {
            const statNumbers = document.querySelectorAll('.stat-number');
            statNumbers.forEach(stat => {
                const target = parseInt(stat.textContent);
                let current = 0;
                const increment = target / 30;
                
                const updateNumber = () => {
                    if (current < target) {
                        current += increment;
                        stat.textContent = Math.ceil(current);
                        setTimeout(updateNumber, 50);
                    } else {
                        stat.textContent = target;
                    }
                };
                
                updateNumber();
            });
        });

        // Initialize responsive features
        function initResponsive() {
            checkMobileStatus();
        }

        window.addEventListener('load', initResponsive);
        window.addEventListener('resize', initResponsive);
    </script>
</body>
</html>